# ============================================================================
# ROBOTRADER ENVIRONMENT CONFIGURATION
# ============================================================================
# Copy this file to .env and fill in your actual values
# Command: cp .env.example .env
#
# ⚠️  SECURITY WARNING:
# - Never commit .env file to git (already in .gitignore)
# - Use strong, unique passwords
# - Keep API keys secure
# ============================================================================

# ----------------------------------------------------------------------------
# DATABASE CONFIGURATION
# ----------------------------------------------------------------------------
# PostgreSQL database for storing trades, positions, and metrics

DB_PASSWORD=CHANGE_ME_strong_password_here_123
# Recommended: Use a password generator (min 16 characters)
# Example: openssl rand -base64 32

# ----------------------------------------------------------------------------
# N8N AUTHENTICATION
# ----------------------------------------------------------------------------
# Credentials for accessing n8n workflow interface at http://localhost:5678

N8N_USER=admin
N8N_PASSWORD=CHANGE_ME_n8n_secure_password

# N8N Encryption Key (required for credential storage)
# Must be at least 32 characters
N8N_ENCRYPTION_KEY=CHANGE_ME_minimum_32_character_encryption_key_here

# N8N Webhook Base URL
WEBHOOK_URL=http://localhost:5678/

# ----------------------------------------------------------------------------
# SNAPTRADE API (WEALTHSIMPLE INTEGRATION)
# ----------------------------------------------------------------------------
# Get your API credentials from: https://snaptrade.com/
# Documentation: https://docs.snaptrade.com/

SNAPTRADE_API_KEY=your_snaptrade_api_key_here
SNAPTRADE_SECRET=your_snaptrade_secret_here
SNAPTRADE_ACCOUNT_ID=your_wealthsimple_account_id_here

# SnapTrade Base URL (do not change unless using sandbox)
SNAPTRADE_BASE_URL=https://api.snaptrade.com

# ----------------------------------------------------------------------------
# MARKET DATA APIs (DUAL PROVIDER ARCHITECTURE)
# ----------------------------------------------------------------------------
# We use TWO market data providers for optimal performance:
# - Finnhub: Real-time data, WebSocket streaming, live quotes
# - Alpha Vantage: Historical data, pre-calculated indicators, backtesting

# FINNHUB API (Real-time data)
# ----------------------------------------------------------------------------
# Get free API key from: https://finnhub.io/register
# Free tier: 60 API calls/minute, WebSocket streaming included
# Used for: Real-time quotes, live price monitoring, WebSocket price feeds

FINNHUB_API_KEY=your_finnhub_api_key_here
FINNHUB_BASE_URL=https://finnhub.io/api/v1
FINNHUB_WEBSOCKET_URL=wss://ws.finnhub.io

# Enable WebSocket for real-time price updates (recommended)
FINNHUB_WEBSOCKET_ENABLED=true

# ALPHA VANTAGE API (Historical & Backtesting)
# ----------------------------------------------------------------------------
# Get free API key from: https://www.alphavantage.co/support/#api-key
# Free tier: 25 API calls/day OR 5 calls/minute
# Used for: Historical data, 50+ pre-calculated indicators, backtesting

ALPHA_VANTAGE_API_KEY=your_alpha_vantage_api_key_here
ALPHA_VANTAGE_BASE_URL=https://www.alphavantage.co/query

# Premium upgrade: 75 calls/min, unlimited daily ($50/month)

# ----------------------------------------------------------------------------
# TRADING ALGORITHM PARAMETERS
# ----------------------------------------------------------------------------
# Risk Management Settings

# Maximum daily loss as percentage of account equity (0.05 = 5%)
MAX_DAILY_LOSS_PERCENT=0.05

# Maximum number of positions to hold simultaneously
MAX_CONCURRENT_POSITIONS=3

# Position size as percentage of account equity (0.02 = 2%)
POSITION_SIZE_PERCENT=0.02

# Profit target as percentage (0.03 = 3%)
PROFIT_TARGET_PERCENT=0.03

# Stop loss as percentage (0.015 = 1.5%)
STOP_LOSS_PERCENT=0.015

# Minimum margin health score (200 = 200%, i.e., 2x buying power)
MIN_MARGIN_HEALTH=150

# ----------------------------------------------------------------------------
# TECHNICAL INDICATOR SETTINGS
# ----------------------------------------------------------------------------
# Algorithm Configuration

# Simple Moving Average - Fast period
SMA_FAST_PERIOD=10

# Simple Moving Average - Slow period
SMA_SLOW_PERIOD=30

# Relative Strength Index period
RSI_PERIOD=14

# RSI Overbought threshold (70 = standard)
RSI_OVERBOUGHT=70

# RSI Oversold threshold (30 = standard)
RSI_OVERSOLD=30

# Average Directional Index threshold (20 = minimum for trend confirmation)
ADX_THRESHOLD=20

# Minimum confidence score to execute trade (0.70 = 70%)
MIN_CONFIDENCE_THRESHOLD=0.70

# ----------------------------------------------------------------------------
# ALERT & NOTIFICATION SETTINGS
# ----------------------------------------------------------------------------
# Telegram Bot (Optional but recommended)
# Create bot: Message @BotFather on Telegram
# Get chat ID: Message @userinfobot

TELEGRAM_BOT_TOKEN=
TELEGRAM_CHAT_ID=

# Email Alerts (Optional)
ALERT_EMAIL=your_email@example.com

# SMTP Settings (for email alerts)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
SMTP_FROM=robotrader@example.com

# ----------------------------------------------------------------------------
# TRADING MODE
# ----------------------------------------------------------------------------
# Set to "paper" for paper trading (recommended for testing)
# Set to "live" for real money trading (use with caution!)

TRADING_MODE=paper

# Paper Trading Settings
PAPER_STARTING_BALANCE=10000.00
PAPER_MARGIN_MULTIPLIER=2.0

# ----------------------------------------------------------------------------
# MARKET HOURS (EST/EDT)
# ----------------------------------------------------------------------------
# Trading schedule (24-hour format)

MARKET_HOURS_START=09:30
MARKET_HOURS_END=16:00

# Timezone
TIMEZONE=America/Toronto

# Trading Days (1 = Monday, 5 = Friday)
TRADING_DAYS=1,2,3,4,5

# ----------------------------------------------------------------------------
# LOGGING CONFIGURATION
# ----------------------------------------------------------------------------

# Log level: debug, info, warning, error, critical
LOG_LEVEL=info

# Enable file logging
LOG_TO_FILE=true

# Log directory
LOG_DIR=logs

# Log retention (days)
LOG_RETENTION_DAYS=30

# ----------------------------------------------------------------------------
# ADVANCED SETTINGS
# ----------------------------------------------------------------------------

# n8n Execution Mode (regular or queue)
N8N_EXECUTIONS_MODE=regular

# n8n Execution Process (main or own)
N8N_EXECUTIONS_PROCESS=main

# n8n Log Level (error, warn, info, verbose, debug)
N8N_LOG_LEVEL=info

# n8n Timezone
N8N_TIMEZONE=America/Toronto

# PostgreSQL Connection Pool Size
DB_POOL_SIZE=10

# Database Host (do not change for Docker setup)
DB_HOST=postgres

# Database Port
DB_PORT=5432

# Database Name
DB_NAME=wealthsimple_trader

# Database User
DB_USER=n8n

# ----------------------------------------------------------------------------
# OPTIONAL FEATURES
# ----------------------------------------------------------------------------

# Enable Backtesting Module
ENABLE_BACKTESTING=false

# Enable Performance Dashboard
ENABLE_DASHBOARD=true

# Enable Tax Tracking
ENABLE_TAX_TRACKING=true

# Enable Superficial Loss Rule Checking
ENABLE_SUPERFICIAL_LOSS_CHECK=true

# ----------------------------------------------------------------------------
# DEVELOPMENT SETTINGS (Do not use in production)
# ----------------------------------------------------------------------------

# Enable debug mode
DEBUG=false

# Skip SSL verification (only for testing)
SKIP_SSL_VERIFY=false

# Enable verbose logging
VERBOSE=false

# Mock API responses (for testing without real APIs)
MOCK_APIS=false

# ----------------------------------------------------------------------------
# NOTES
# ----------------------------------------------------------------------------
#
# REQUIRED BEFORE STARTING:
# 1. DB_PASSWORD - Strong password for PostgreSQL
# 2. N8N_PASSWORD - Password for n8n interface
# 3. N8N_ENCRYPTION_KEY - Random 32+ character string
# 4. SNAPTRADE_API_KEY - Get from SnapTrade
# 5. SNAPTRADE_SECRET - Get from SnapTrade
# 6. SNAPTRADE_ACCOUNT_ID - Your Wealthsimple account ID
# 7. FINNHUB_API_KEY - Get free key from Finnhub (real-time data)
# 8. ALPHA_VANTAGE_API_KEY - Get free key from Alpha Vantage (historical)
#
# OPTIONAL BUT RECOMMENDED:
# - TELEGRAM_BOT_TOKEN - For instant trade notifications
# - TELEGRAM_CHAT_ID - Your Telegram chat ID
#
# TESTING CHECKLIST:
# 1. Set TRADING_MODE=paper
# 2. Verify all required variables are set
# 3. Test with small position sizes first
# 4. Monitor for 2+ weeks before going live
#
# SECURITY REMINDERS:
# - Rotate API keys every 90 days
# - Use different passwords for each service
# - Enable 2FA on all accounts
# - Regularly backup your .env file (encrypted)
# - Never share your .env file
#
# ============================================================================
